{"ast":null,"code":"var _jsxFileName = \"/Users/ridgeagyei/Desktop/KingsProject/app/src/client/components/Mutations/auth-login.js\";\nimport React, { Component } from 'react';\nimport { Mutation } from 'react-apollo';\nimport gql from 'graphql-tag';\nimport history from '../history';\nconst LOGIN = gql`\n  mutation login($email : String!, $password : String!) {\n    login(email : $email, password : $password) {\n      token\n      user\n    }\n }`;\nexport default class LoginMutation extends Component {\n  render() {\n    const {\n      children,\n      changeLoginState\n    } = this.props;\n    return /*#__PURE__*/React.createElement(Mutation, {\n      update: (store, {\n        data: {\n          login\n        }\n      }) => {\n        if (login.token) {\n          localStorage.setItem('jwt', login.token);\n          changeLoginState(true);\n          history.push('/app/home');\n          history.go();\n        }\n\n        if (login.user.userType === 'ADMIN') {\n          localStorage.setI;\n        }\n      },\n      mutation: LOGIN,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 7\n      }\n    }, (login, {\n      loading,\n      error\n    }) => React.Children.map(children, function (child) {\n      return React.cloneElement(child, {\n        login,\n        loading,\n        error\n      });\n    }));\n  }\n\n}","map":{"version":3,"sources":["/Users/ridgeagyei/Desktop/KingsProject/app/src/client/components/Mutations/auth-login.js"],"names":["React","Component","Mutation","gql","history","LOGIN","LoginMutation","render","children","changeLoginState","props","store","data","login","token","localStorage","setItem","push","go","user","userType","setI","loading","error","Children","map","child","cloneElement"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,OAAOC,OAAP,MAAoB,YAApB;AAGA,MAAMC,KAAK,GAAGF,GAAI;;;;;;GAAlB;AASA,eAAe,MAAMG,aAAN,SAA4BL,SAA5B,CAAsC;AACnDM,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEC,MAAAA,QAAF;AAAYC,MAAAA;AAAZ,QAAiC,KAAKC,KAA5C;AACA,wBACE,oBAAC,QAAD;AACE,MAAA,MAAM,EAAI,CAACC,KAAD,EAAQ;AAAEC,QAAAA,IAAI,EAAE;AAAEC,UAAAA;AAAF;AAAR,OAAR,KAAgC;AACtC,YAAGA,KAAK,CAACC,KAAT,EAAgB;AACZC,UAAAA,YAAY,CAACC,OAAb,CAAqB,KAArB,EAA4BH,KAAK,CAACC,KAAlC;AACAL,UAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACAL,UAAAA,OAAO,CAACa,IAAR,CAAa,WAAb;AACAb,UAAAA,OAAO,CAACc,EAAR;AACH;;AAED,YAAGL,KAAK,CAACM,IAAN,CAAWC,QAAX,KAAwB,OAA3B,EAAmC;AACjCL,UAAAA,YAAY,CAACM,IAAb;AACD;AACJ,OAZH;AAaA,MAAA,QAAQ,EAAEhB,KAbV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAcG,CAACQ,KAAD,EAAQ;AAAES,MAAAA,OAAF;AAAWC,MAAAA;AAAX,KAAR,KACCvB,KAAK,CAACwB,QAAN,CAAeC,GAAf,CAAmBjB,QAAnB,EAA6B,UAASkB,KAAT,EAAe;AAC1C,aAAO1B,KAAK,CAAC2B,YAAN,CAAmBD,KAAnB,EAA0B;AAAEb,QAAAA,KAAF;AAASS,QAAAA,OAAT;AAAkBC,QAAAA;AAAlB,OAA1B,CAAP;AACD,KAFD,CAfJ,CADF;AAsBD;;AAzBkD","sourcesContent":["import React, { Component } from 'react';\nimport { Mutation } from 'react-apollo'\nimport gql from 'graphql-tag'\nimport history from '../history'\n\n\nconst LOGIN = gql`\n  mutation login($email : String!, $password : String!) {\n    login(email : $email, password : $password) {\n      token\n      user\n    }\n }`;\n \n\nexport default class LoginMutation extends Component {\n  render() {\n    const { children, changeLoginState } = this.props;\n    return (\n      <Mutation\n        update = {(store, { data: { login } }) => {\n            if(login.token) {\n                localStorage.setItem('jwt', login.token);\n                changeLoginState(true);\n                history.push('/app/home')\n                history.go()\n            }\n\n            if(login.user.userType === 'ADMIN'){\n              localStorage.setI\n            }\n        }}\n      mutation={LOGIN}>\n        {(login, { loading, error}) =>\n          React.Children.map(children, function(child){\n            return React.cloneElement(child, { login, loading, error });\n          })\n        }\n      </Mutation>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}