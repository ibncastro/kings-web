{"ast":null,"code":"var _jsxFileName = \"/Users/ridgeagyei/Desktop/KingsProject/app/src/client/admin/mutations/auth-login.js\";\nimport React, { Component } from 'react';\nimport { Mutation } from 'react-apollo';\nimport gql from 'graphql-tag';\nimport history from '../../components/history';\nconst LOGIN = gql`\n  mutation login($username : String!, $password : String!) {\n    adminLogin(username : $username, password : $password) {\n      token\n      user{\n        username\n      }\n    }\n }`;\nexport default class LoginMutation extends Component {\n  render() {\n    const {\n      children,\n      changeAdminLoginState\n    } = this.props;\n    return /*#__PURE__*/React.createElement(Mutation, {\n      update: (store, {\n        data: {\n          adminLogin\n        }\n      }) => {\n        if (adminLogin.token) {\n          localStorage.setItem('adminjwt', adminLogin.token);\n          console.log(adminLogin.user.username);\n          changeAdminLoginState(true);\n          history.push('/admin/home');\n          history.go();\n        }\n      },\n      mutation: LOGIN,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 22,\n        columnNumber: 7\n      }\n    }, (adminLogin, {\n      loading,\n      error\n    }) => React.Children.map(children, function (child) {\n      return React.cloneElement(child, {\n        adminLogin,\n        loading,\n        error\n      });\n    }));\n  }\n\n}","map":{"version":3,"sources":["/Users/ridgeagyei/Desktop/KingsProject/app/src/client/admin/mutations/auth-login.js"],"names":["React","Component","Mutation","gql","history","LOGIN","LoginMutation","render","children","changeAdminLoginState","props","store","data","adminLogin","token","localStorage","setItem","console","log","user","username","push","go","loading","error","Children","map","child","cloneElement"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,OAAOC,OAAP,MAAoB,0BAApB;AAGA,MAAMC,KAAK,GAAGF,GAAI;;;;;;;;GAAlB;AAWA,eAAe,MAAMG,aAAN,SAA4BL,SAA5B,CAAsC;AACnDM,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEC,MAAAA,QAAF;AAAYC,MAAAA;AAAZ,QAAsC,KAAKC,KAAjD;AACA,wBACE,oBAAC,QAAD;AACE,MAAA,MAAM,EAAI,CAACC,KAAD,EAAQ;AAAEC,QAAAA,IAAI,EAAE;AAAEC,UAAAA;AAAF;AAAR,OAAR,KAAqC;AAC3C,YAAGA,UAAU,CAACC,KAAd,EAAqB;AACjBC,UAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCH,UAAU,CAACC,KAA5C;AACAG,UAAAA,OAAO,CAACC,GAAR,CAAYL,UAAU,CAACM,IAAX,CAAgBC,QAA5B;AACAX,UAAAA,qBAAqB,CAAC,IAAD,CAArB;AACAL,UAAAA,OAAO,CAACiB,IAAR,CAAa,aAAb;AACAjB,UAAAA,OAAO,CAACkB,EAAR;AACH;AACJ,OATH;AAUA,MAAA,QAAQ,EAAEjB,KAVV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAWG,CAACQ,UAAD,EAAa;AAAEU,MAAAA,OAAF;AAAWC,MAAAA;AAAX,KAAb,KACCxB,KAAK,CAACyB,QAAN,CAAeC,GAAf,CAAmBlB,QAAnB,EAA6B,UAASmB,KAAT,EAAe;AAC1C,aAAO3B,KAAK,CAAC4B,YAAN,CAAmBD,KAAnB,EAA0B;AAAEd,QAAAA,UAAF;AAAcU,QAAAA,OAAd;AAAuBC,QAAAA;AAAvB,OAA1B,CAAP;AACD,KAFD,CAZJ,CADF;AAmBD;;AAtBkD","sourcesContent":["import React, { Component } from 'react';\nimport { Mutation } from 'react-apollo'\nimport gql from 'graphql-tag'\nimport history from '../../components/history'\n\n\nconst LOGIN = gql`\n  mutation login($username : String!, $password : String!) {\n    adminLogin(username : $username, password : $password) {\n      token\n      user{\n        username\n      }\n    }\n }`;\n \n\nexport default class LoginMutation extends Component {\n  render() {\n    const { children, changeAdminLoginState } = this.props;\n    return (\n      <Mutation\n        update = {(store, { data: { adminLogin } }) => {\n            if(adminLogin.token) {\n                localStorage.setItem('adminjwt', adminLogin.token);\n                console.log(adminLogin.user.username)\n                changeAdminLoginState(true);\n                history.push('/admin/home')\n                history.go()\n            }\n        }}\n      mutation={LOGIN}>\n        {(adminLogin, { loading, error}) =>\n          React.Children.map(children, function(child){\n            return React.cloneElement(child, { adminLogin, loading, error });\n          })\n        }\n      </Mutation>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}